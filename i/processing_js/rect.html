<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>△□○</title>
<script src="processing-1.4.8.min.js"></script>
<script type="text/processing" data-processing-target="processing-canvas">

int x;
int y;
int i;
int field=new Array(400);
int ptx=new Array(20);
int pty=new Array(20);
int pt1=new Array(20);
int pt2=new Array(20);
int mode=0;//0 ->walk ,1 ->paint rectangle
int flag;//walk complete

void setup(){
size(400, 400);
background(255);
noFill();
stroke(0);

for(i=0;i<400;i=i+1){
  field[i]= new Array(400);
}

for(y = 0; y < 400; y=y+1){
  for(x = 0; x < 400; x=x+1){
    field[x][y] = 0;
  }
}

//horizontal line
for(i=0;i<10;i=i+1){
  ptx[i]=(int)random(1,19)*20;
  pty[i]=(int)random(1,19)*20;
  pt1[i]=ptx[i];
  pt2[i]=ptx[i];
  point(ptx[i],pty[i]);
  field[ptx[i]][pty[i]]=1;
}
//vertical line
for(i=10;i<20;i=i+1){
  ptx[i]=(int)random(1,19)*20;
  pty[i]=(int)random(1,19)*20;
  pt1[i]=pty[i];
  pt2[i]=pty[i];
  point(ptx[i],pty[i]);
  field[ptx[i]][pty[i]]=1;
}
  //fence
  for(i=0;i<400;i=i+1){

    point(i,0);
    field[i][0]=1;
    point(i,399);
    field[i][399]=1;
    point(0,i);
    field[0][i]=1;
    point(399,i);
    field[399][i]=1;
  }

}

void draw(){
  if(mode==0){
    flag=0;
    walk();
    if(flag==0){
      mode=1;
    }
  }else {
    paint_rect();
  }

}

void paint_rect(){
  int d_r=13,d_l=13,d_u=257,d_d=257;
  int d_x=13,d_y=257;
  if(field[d_x][d_u] != 1){
    //line(a,b,c,d);
    //d_u=d_u+1;
  }
  ellipse(200,200,150,150);
  return;
}

void walk(){
  //for left
  for(i=0;i<10;i=i+1){
    if( pt1[i] > 0 && field[pt1[i]-1][pty[i]]==0 ){
      pt1[i]=pt1[i]-1;
      point(pt1[i],pty[i]);
	    field[pt1[i]][pty[i]]=1;
      flag=1;
    }
  }

  // for right
  for(i=0;i<10;i=i+1){
    if(pt2[i]<399 && field[pt2[i]+1][pty[i]]==0){
      pt2[i]=pt2[i]+1;
      point(pt2[i],pty[i]);
      field[pt2[i]][pty[i]]=1;
      flag=1;
    }
  }

  //for upward
  for(i=10;i<20;i=i+1){
    if(pt1[i] > 0 && field[ptx[i]][pt1[i]-1]==0){
      pt1[i]=pt1[i]-1;
      point(ptx[i],pt1[i]);
      field[ptx[i]][pt1[i]]=1;
      flag=1;
    }
  }
  //for downward
  for(i=10;i<20;i=i+1){
    if(pt2[i] <399 && field[ptx[i]][pt2[i]+1]==0){
      pt2[i]=pt2[i]+1;
      point(ptx[i],pt2[i]);
      field[ptx[i]][pt2[i]]=1;
      flag=1;
    }
  }

}

</script>


</head>
<body>
    <BR>
    <canvas id="processing-canvas"> </canvas>
    <p>2d composition</p>
</body>
</html>
